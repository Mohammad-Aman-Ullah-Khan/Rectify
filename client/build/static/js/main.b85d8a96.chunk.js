(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{466:function(e,t,a){},467:function(e,t,a){},538:function(e,t){},539:function(e,t){},547:function(e,t){},548:function(e,t){},549:function(e,t){},550:function(e,t){},551:function(e,t,a){},552:function(e,t,a){},554:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(91),r=a.n(c),i=(a(466),a(8)),o=a(13),l=a(15),d=a(16),u=a(82),b=a(63),j=(a(467),a(94)),h=a(221),m=a(402),p=a(108),x="GET_ERRORS",f="USER_LOADING",O="SET_CURRENT_USER",g=a(473),v={isAuthenticated:!1,user:{},loading:!1},y={},w=Object(h.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(p.a)(Object(p.a)({},e),{},{isAuthenticated:!g(t.payload),user:t.payload});case f:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload;default:return e}}}),_=[m.a],S=Object(h.d)(w,{},Object(h.c)(h.a.apply(void 0,_))),N=a(297),k=a(114),C=a.n(k),E=function(e){e?C.a.defaults.headers.common.Authorization=e:delete C.a.defaults.headers.common.Authorization},R=function(e){return{type:O,payload:e}},P=function(){return function(e){localStorage.removeItem("jwtToken"),E(!1),e(R({}))}},T=a(2);function L(){return Object(T.jsx)("div",{className:"navbar-fixed",children:Object(T.jsx)("nav",{className:"z-depth-0",children:Object(T.jsx)("div",{className:"nav-wrapper white",children:Object(T.jsxs)(u.b,{to:"/",style:{fontFamily:"monospace"},className:"col s5 brand-logo center black-text",children:[Object(T.jsx)("i",{className:"material-icons",children:"visibility"}),"RECTIFY"]})})})})}var D=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(T.jsx)("div",{style:{height:"80vh"},className:"container valign-wrapper",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col s12 center-align",children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Secure "}),"your online exams with"," ",Object(T.jsx)("span",{style:{fontFamily:"Consolas"},children:Object(T.jsx)("b",{children:"Rectify"})})," and ensure cheating free exams!"]}),Object(T.jsx)("p",{className:"flow-text grey-text text-darken-1",children:"Create an exam, share unique code with students and monitor them in real time from the dashboard. It's this simple and easy to use!"}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"col s6",children:Object(T.jsx)(u.b,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-5",children:"Register"})}),Object(T.jsx)("div",{className:"col s6",children:Object(T.jsx)(u.b,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-5",children:"Log In"})})]})})})}}]),a}(n.Component),F=a(21),A=a(146),M=a.n(A),U=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(F.a)({},t.target.id,t.target.value))},e.onToggle=function(t){e.setState(Object(F.a)({},t.target.id,!e.state.userType))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2,userType:e.state.userType};e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",password:"",password2:"",userType:!1,errors:{}},e}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this.state.errors;return Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col s8 offset-s2",children:[Object(T.jsxs)(u.b,{to:"/",className:"btn-flat waves-effect",children:[Object(T.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]}),Object(T.jsxs)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Register"})," below"]}),Object(T.jsxs)("p",{className:"grey-text text-darken-1",children:["Already have an account? ",Object(T.jsx)(u.b,{to:"/login",children:"Log in"})]})]}),Object(T.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:M()("",{invalid:e.name})}),Object(T.jsx)("label",{htmlFor:"name",children:"Name"}),Object(T.jsx)("span",{className:"red-text",children:e.name})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:M()("",{invalid:e.email})}),Object(T.jsx)("label",{htmlFor:"email",children:"Email"}),Object(T.jsx)("span",{className:"red-text",children:e.email})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:M()("",{invalid:e.password})}),Object(T.jsx)("label",{htmlFor:"password",children:"Password"}),Object(T.jsx)("span",{className:"red-text",children:e.password})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:M()("",{invalid:e.password2})}),Object(T.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(T.jsx)("span",{className:"red-text",children:e.password2})]}),Object(T.jsx)("div",{class:"switch col s12",children:Object(T.jsxs)("label",{children:["Are you an instructor?",Object(T.jsx)("input",{type:"checkbox",id:"userType",checked:this.state.userType,onChange:this.onToggle}),Object(T.jsx)("span",{className:"lever"})]})}),Object(T.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(T.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Sign up"})})]})]})})})}}]),a}(n.Component),I=Object(j.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){C.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:x,payload:e.response.data})}))}}})(Object(b.h)(U)),z=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(F.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this.state.errors;return Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{style:{marginTop:"4rem"},className:"row",children:Object(T.jsxs)("div",{className:"col s8 offset-s2",children:[Object(T.jsxs)(u.b,{to:"/",className:"btn-flat waves-effect",children:[Object(T.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]}),Object(T.jsxs)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Login"})," below"]}),Object(T.jsxs)("p",{className:"grey-text text-darken-1",children:["Don't have an account? ",Object(T.jsx)(u.b,{to:"/register",children:"Register"})]})]}),Object(T.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:M()("",{invalid:e.email||e.emailnotfound})}),Object(T.jsx)("label",{htmlFor:"email",children:"Email"}),Object(T.jsxs)("span",{className:"red-text",children:[e.email,e.emailnotfound]})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:M()("",{invalid:e.password||e.passwordincorrect})}),Object(T.jsx)("label",{htmlFor:"password",children:"Password"}),Object(T.jsxs)("span",{className:"red-text",children:[e.password,e.passwordincorrect]})]}),Object(T.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(T.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Login"})})]})]})})})}}]),a}(n.Component),q=Object(j.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){C.a.post("/api/users/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),E(a);var n=Object(N.a)(a);t(R(n))})).catch((function(e){return t({type:x,payload:e.response.data})}))}}})(z),B=a(435),Y=Object(j.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(B.a)(e,["component","auth"]);return Object(T.jsx)(b.b,Object(p.a)(Object(p.a)({},n),{},{render:function(e){return!0===a.isAuthenticated?Object(T.jsx)(t,Object(p.a)({},e)):Object(T.jsx)(b.a,{to:"/login"})}}))})),V=a(4),W=a(644),K=a(650),G=a(638),H=a(664),J=a(662),Q=a(663),X=a(639),Z=a(640),$=a(409),ee=a(641),te=a(97),ae=a.n(te),ne=a(9),se=a.n(ne),ce=a(22),re=a(14),ie=a(629),oe=a(654),le=a(660),de=a(661),ue=a(653),be=a(659),je=a(651),he=a(645),me=a(652),pe=a(647),xe=a(655),fe=a(570),Oe=a(440),ge=a(631),ve=a(656),ye=a(648),we=a(407),_e=a.n(we),Se=a(408),Ne=a.n(Se),ke=a(404),Ce=a.n(ke),Ee=a(114);function Re(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function Pe(e,t){return"desc"===e?function(e,a){return Re(e,a,t)}:function(e,a){return-Re(e,a,t)}}function Te(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var Le=[{id:"s_no",numeric:!1,disablePadding:!1,label:"S. No."},{id:"student_name",numeric:!1,disablePadding:!1,label:"Name"},{id:"student_email",numeric:!1,disablePadding:!1,label:"Email"},{id:"tab_change_count",numeric:!0,disablePadding:!1,label:"Tab Changes"},{id:"key_press_count",numeric:!0,disablePadding:!1,label:"Prohibited Key Press"},{id:"face_not_visible",numeric:!1,disablePadding:!1,label:"Face Not Visible"},{id:"multiple_faces_found",numeric:!1,disablePadding:!1,label:"Multiple Faces Detected"},{id:"mobile_found",numeric:!1,disablePadding:!1,label:"Mobile Found"},{id:"prohibited_object_found",numeric:!1,disablePadding:!1,label:"Prohibited Object Found"}];function De(e){e.onSelectAllClick;var t=e.order,a=e.orderBy,n=(e.numSelected,e.rowCount,e.onRequestSort);return Object(T.jsx)(je.a,{children:Object(T.jsx)(me.a,{children:Le.map((function(e){return Object(T.jsx)(ue.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&t,children:Object(T.jsxs)(pe.a,{active:a===e.id,direction:a===e.id?t:"asc",onClick:(s=e.id,function(e){n(e,s)}),children:[e.label,a===e.id?Object(T.jsx)(oe.a,{component:"span",sx:ge.a,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var s}))})})}var Fe=function(e){var t=e.numSelected;return Object(T.jsxs)(xe.a,{sx:Object(p.a)({pl:{sm:2},pr:{xs:1,sm:1}},t>0&&{bgcolor:function(e){return Object(ie.a)(e.palette.primary.main,e.palette.action.activatedOpacity)}}),children:[t>0?Object(T.jsxs)(fe.a,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t," selected"]}):Object(T.jsx)(fe.a,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:"Exam Logs"}),t>0?Object(T.jsx)(ye.a,{title:"Delete",children:Object(T.jsx)(ve.a,{children:Object(T.jsx)(_e.a,{})})}):Object(T.jsx)(ye.a,{title:"Filter list",children:Object(T.jsx)(ve.a,{children:Object(T.jsx)(Ne.a,{})})})]})};function Ae(e){var t=s.a.useState(""),a=Object(V.a)(t,2),n=a[0],c=a[1],r=s.a.useState(!1),i=Object(V.a)(r,2),o=i[0],l=i[1],d=s.a.useState(""),u=Object(V.a)(d,2),b=u[0],j=u[1],h=s.a.useState("asc"),m=Object(V.a)(h,2),p=m[0],x=m[1],f=s.a.useState("company"),O=Object(V.a)(f,2),g=O[0],v=O[1],y=s.a.useState([]),w=Object(V.a)(y,2),_=w[0],S=w[1],N=s.a.useState(0),k=Object(V.a)(N,2),C=k[0],E=k[1],R=s.a.useState(!1),P=Object(V.a)(R,2),L=P[0],D=(P[1],s.a.useState(5)),F=Object(V.a)(D,2),A=F[0],M=F[1],U=s.a.useState([]),I=Object(V.a)(U,2),z=I[0],q=I[1],B=s.a.useState([]),Y=Object(V.a)(B,2),K=Y[0],G=Y[1],H=s.a.useState(""),J=Object(V.a)(H,2),Q=J[0],X=J[1],Z=function(){var t=Object(re.a)(se.a.mark((function t(){var a,s,c,r;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Ee.get("/api/exams/examsByProf?exam_code="+n+"&prof_email="+e.prof_email).then((function(e){console.log(e)})).catch((function(e){console.log(e),j("Either exam code is invalid or you dont have permission"),l(!1),G([]),q([])})),t.next=4,Ee.post("/api/logs/allData",{exam_code:n});case 4:for(a=t.sent,j(""),l(!0),s=[],c=0;c<a.data.length;c++)(r=new Object).s_no=c+1,r.student_name=a.data[c].student_name,r.student_email=a.data[c].student_email,r.tab_change_count=a.data[c].tab_change_count,r.key_press_count=a.data[c].key_press_count,r.face_not_visible=a.data[c].face_not_visible,r.multiple_faces_found=a.data[c].multiple_faces_found,r.mobile_found=a.data[c].mobile_found,r.prohibited_object_found=a.data[c].prohibited_object_found,s=[].concat(Object(ce.a)(s),[r]);G(s),q(s),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),$=function(e){var t=K.filter((function(t){return!(!t.student_name.toLowerCase().includes(e.toLowerCase())&&!t.student_email.toLowerCase().includes(e.toLowerCase()))}));q(t)},ee=A-Math.min(A,z.length-C*A);return Object(T.jsxs)(oe.a,{sx:{width:"100%"},children:[Object(T.jsx)(W.a,{autoFocus:!0,padding:"10px",margin:"dense",variant:"standard",id:"exam_code",label:"Exam Code",type:"text",required:!0,value:n,onChange:function(e){return c(e.target.value)}}),Object(T.jsx)("button",{style:{width:"200px",borderRadius:"3px",letterSpacing:"1.5px",marginLeft:"10px",marginTop:"1rem"},onClick:Z,className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Check Logs"}),Object(T.jsx)("br",{}),Object(T.jsxs)("p",{style:{color:"red",textAlign:"center"},children:[" ",b," "]}),!0===o&&Object(T.jsxs)(Oe.a,{sx:{width:"100%",mb:2},children:[Object(T.jsx)(Ce.a,{value:Q,onChange:function(e){return $(e)},onCancelSearch:function(){return X(""),void $(Q)},style:{border:"3px solid rgba(0, 0, 0, 0.05)"}}),Object(T.jsx)(Fe,{numSelected:_.length}),Object(T.jsx)(be.a,{children:Object(T.jsxs)(le.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:L?"small":"medium",children:[Object(T.jsx)(De,{numSelected:_.length,order:p,orderBy:g,onSelectAllClick:function(e){if(e.target.checked){var t=z.map((function(e){return e.company}));S(t)}else S([])},onRequestSort:function(e,t){x(g===t&&"asc"===p?"desc":"asc"),v(t)},rowCount:z.length}),Object(T.jsxs)(de.a,{children:[Te(z,Pe(p,g)).slice(C*A,C*A+A).map((function(e,t){a=e.company,_.indexOf(a);var a,n="enhanced-table-checkbox-".concat(t);return Object(T.jsxs)(me.a,{hover:!0,children:[Object(T.jsx)(ue.a,{component:"th",id:n,scope:"row",padding:"normal",children:e.s_no}),Object(T.jsx)(ue.a,{align:"left",children:e.student_name}),Object(T.jsx)(ue.a,{align:"left",children:e.student_email}),Object(T.jsx)(ue.a,{align:"right",children:e.tab_change_count}),Object(T.jsx)(ue.a,{align:"right",children:e.key_press_count}),Object(T.jsx)(ue.a,{align:"left",children:!0===e.face_not_visible?"Yes":"No"}),Object(T.jsx)(ue.a,{align:"left",children:!0===e.multiple_faces_found?"Yes":"No"}),Object(T.jsx)(ue.a,{align:"left",children:!0===e.mobile_found?"Yes":"No"}),Object(T.jsx)(ue.a,{align:"left",children:!0===e.prohibited_object_found?"Yes":"No"})]},e.s_no)})),ee>0&&Object(T.jsx)(me.a,{style:{height:(L?33:53)*ee},children:Object(T.jsx)(ue.a,{colSpan:6})})]})]})}),Object(T.jsx)(he.a,{rowsPerPageOptions:[5,10,25],component:"div",count:z.length,rowsPerPage:A,page:C,onPageChange:function(e,t){E(t)},onRowsPerPageChange:function(e){M(parseInt(e.target.value,10)),E(0)}})]}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{})]})}var Me=Object(j.b)((function(e){return{auth:e.auth}}),{logoutUser:P})((function(e){var t=Object(n.useState)(!1),s=Object(V.a)(t,2),c=s[0],r=s[1],i=Object(n.useState)(""),o=Object(V.a)(i,2),l=o[0],d=o[1],u=Object(n.useState)(""),b=Object(V.a)(u,2),j=b[0],h=b[1],m=Object(n.useState)(new Date),x=Object(V.a)(m,2),f=x[0],O=x[1],g=Object(n.useState)(0),v=Object(V.a)(g,2),y=v[0],w=v[1],_=Object(n.useState)(""),S=Object(V.a)(_,2),N=S[0],k=S[1],C=Object(n.useState)(""),E=Object(V.a)(C,2),R=E[0],P=E[1],L=Object(n.useState)(""),D=Object(V.a)(L,2),F=D[0],A=(D[1],a(114));function M(){d(""),h(""),O(new Date),w(0),k(""),P(""),r(!1)}return Object(T.jsx)("div",{style:{height:"100%"},className:"container valign-wrapper",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col s12 center-align",children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Hey there,"})," ",e.name.split(" ")[0],Object(T.jsx)("p",{className:"flow-text grey-text text-darken-1",children:"You can create a new exam and see the results of previous exams."})]}),Object(T.jsx)("button",{style:{width:"200px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:function(){r(!0)},className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Create Exam"}),Object(T.jsx)("button",{style:{width:"200px",borderRadius:"3px",letterSpacing:"1.5px",marginLeft:"10px",marginTop:"1rem"},onClick:e.logoutUser,className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Logout"}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)(Ae,{exam_code:F,prof_email:e.prof_email}),Object(T.jsxs)(G.a,{open:c,onClose:M,"aria-labelledby":"form-dialog-title",repositionOnUpdate:!1,style:{padding:"10px 10px 10px 10px"},children:[Object(T.jsx)(X.a,{id:"form-dialog-title",children:"Create Exam"}),Object(T.jsxs)(J.a,{margin:"20px",style:{padding:"30px"},children:[Object(T.jsx)(Q.a,{children:"Enter details for the exam. Press Generate to generate the exam code and share it with the students."}),Object(T.jsx)(W.a,{autoFocus:!0,padding:"10px",margin:"dense",variant:"standard",id:"name",label:"Exam Name",type:"text",fullWidth:!0,required:!0,value:l,onChange:function(e){return d(e.target.value)}}),Object(T.jsx)(W.a,{id:"examLink",name:"examLink",label:"Exam Link",margin:"dense",variant:"standard",value:j,onChange:function(e){return h(e.target.value)},required:!0,fullWidth:!0}),Object(T.jsx)($.a,{dateAdapter:Z.a,children:Object(T.jsx)(ee.a,{renderInput:function(e){return Object(T.jsx)(W.a,Object(p.a)({},e))},label:"DateTimePicker",value:f,margin:"dense",variant:"standard",onChange:function(e){O(e)}})}),Object(T.jsx)(W.a,{id:"duration",name:"duration",label:"Exam duration (minutes)",margin:"dense",variant:"standard",value:y,onChange:function(e){return w(e.target.value)},required:!0,minDate:new Date,minTime:new Date(0,0,0,8)}),Object(T.jsx)(W.a,{id:"exam_code",name:"exam_code",label:"Exam Code",margin:"dense",variant:"standard",value:N,disabled:!0,onChange:function(e){return k(e.target.value)},required:!0,fullWidth:!0}),Object(T.jsxs)("p",{style:{color:"red"},children:[" ",R]}),Object(T.jsx)(K.a,{onClick:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*a));k(e),navigator.clipboard.writeText(e)},children:"Generate Exam Code"})]}),Object(T.jsxs)(H.a,{children:[Object(T.jsx)(K.a,{onClick:M,color:"secondary",children:"Close"}),Object(T.jsx)(K.a,{onClick:function(){if(""!==l)if(""!==j)if(/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(j))if(0!==y)if(""!==N){var t=new Date;f<t?P("Please select a date and time of the future"):(A.post("/api/exams/createExam",{name:l,exam_link:j,date_time_start:f,duration:y,exam_code:N,prof_email:e.prof_email}).then((function(e){console.log(e),ae()("Exam has been created. Your exam code has been copied to your clipboard, please share it with the students.")})).catch((function(e){console.log(e),ae()("Some error occoured in creating the exam")})),M())}else P("Click Generate exam code to get an exam code first");else P("Duration cannot be 0");else P("Exam Link must be a valid url");else P("Exam Link cannot be empty");else P("Name of Exam cannot be empty")},color:"primary",children:"Save"})]})]})]})})})}));var Ue=Object(j.b)((function(e){return{auth:e.auth}}),{logoutUser:P})((function(e){var t=Object(n.useState)(""),s=Object(V.a)(t,2),c=s[0],r=s[1],i=Object(n.useState)(""),o=Object(V.a)(i,2),l=o[0],d=o[1],u=a(114),j=a(524),h=Object(b.g)();return Object(T.jsx)("div",{style:{height:"75vh"},className:"container valign-wrapper",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col s12 center-align",children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Hey there,"})," ",e.name.split(" ")[0],Object(T.jsx)("p",{className:"flow-text grey-text text-darken-1",children:"Please enter the Exam Code to start the exam"})]}),Object(T.jsx)(W.a,{autoFocus:!0,padding:"10px",margin:"20px",variant:"standard",id:"exam_code",label:"Exam Code",type:"text",required:!0,value:c,onChange:function(e){return r(e.target.value)}}),Object(T.jsx)("button",{style:{width:"200px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginLeft:"1rem"},onClick:function(){u.get("/api/exams/examByCode?exam_code="+c).then((function(t){console.log(t);var a=t.data.date_time_start,n=new Date(a),s=j(n).add(t.data.duration,"m").toDate(),r=new Date;if(r>=n&&r<s){var i=Math.abs(s-r),o=Math.floor(i/1e3/60),l=Math.floor(i/1e3)%60;console.log(i,o,l),d("Starting exam");var u={exam_code:c,student_name:e.name,student_email:e.student_email,exam_link:t.data.exam_link,prof_email:t.data.prof_email,mins_left:o,secs_left:l};h.push({pathname:"/test",state:u})}else d(r>=s?"Exam has already ended":"Exam has not started now")})).catch((function(e){console.log(e),d("Exam code is invalid")}))},className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Start Exam"}),Object(T.jsx)("button",{style:{width:"200px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginLeft:"1rem"},onClick:e.logoutUser,className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Logout"}),Object(T.jsx)("br",{}),Object(T.jsx)("p",{style:{color:"red"},children:l})]})})})})),Ie=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.auth.user;return console.log(e),Object(T.jsx)("div",{children:!0===e.userType?Object(T.jsx)(Me,{name:e.name,prof_email:e.email,logoutUser:this.props.logoutUser}):Object(T.jsx)(Ue,{name:e.name,student_email:e.email,logoutUser:this.props.logoutUser})})}}]),a}(n.Component),ze=Object(j.b)((function(e){return{auth:e.auth}}),{logoutUser:P})(Ie),qe=a(411),Be=(a(553),a(551),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).videoRef=s.a.createRef(),n.canvasRef=s.a.createRef(),n.detectFrame=function(e,t){t.detect(e).then((function(a){if(!n.canvasRef.current)return!1;n.renderPredictions(a),requestAnimationFrame((function(){n.detectFrame(e,t)}))}))},n.renderPredictions=function(e){var t=n.canvasRef.current.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height),t.font="16px sans-serif",t.textBaseline="top",e.forEach((function(e){var a=e.bbox[0],n=e.bbox[1],s=e.bbox[2],c=e.bbox[3];t.strokeStyle="#00FFFF",t.lineWidth=2,t.strokeRect(a,n,s,c),t.fillStyle="#00FFFF";var r=t.measureText(e.class).width,i=parseInt("16px sans-serif",10);t.fillRect(a,n,r+8,i+8)})),e.forEach((function(e){var a=e.bbox[0],n=e.bbox[1];t.fillStyle="#000000","person"!==e.class&&"cell phone"!==e.class&&"book"!==e.class&&"laptop"!==e.class||t.fillText(e.class,a,n)}));var a=0;0===e.length&&n.state.count<50?n.state.count++:0===e.length&&(n.state.count=0,ae()("Face Not Visible","Action has been Recorded","error"),n.props.FaceNotVisible());for(var s=0;s<e.length;s++)"cell phone"===e[s].class?(n.props.MobilePhone(),ae()("Cell Phone Detected","Action has been Recorded","error")):"book"===e[s].class||"laptop"===e[s].class?(n.props.ProhibitedObject(),ae()("Prohibited Object Detected","Action has been Recorded","error")):"person"===e[s].class&&(a+=1,n.state.count=0);a>1&&(n.props.MultipleFacesVisible(),ae()(a.toString()+" people detected","Action has been recorded","error"))},n.state={count:0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var t=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:800,height:400}}).then((function(t){return window.stream=t,e.videoRef.current.srcObject=t,new Promise((function(t,a){e.videoRef.current.onloadedmetadata=function(){t()}}))})),a=qe.load();Promise.all([a,t]).then((function(t){e.detectFrame(e.videoRef.current,t[0])})).catch((function(e){console.error(e)}))}}},{key:"render",value:function(){return Object(T.jsxs)("div",{children:[Object(T.jsx)("video",{className:"size",autoPlay:!0,playsInline:!0,muted:!0,ref:this.videoRef,width:"800",height:"400"}),Object(T.jsx)("canvas",{className:"size",ref:this.canvasRef,width:"800",height:"400"})]})}}]),a}(s.a.Component));a(552);function Ye(e){var t=Object(n.useState)(e.location.state.student_name),a=Object(V.a)(t,2),s=a[0],c=(a[1],Object(n.useState)(e.location.state.student_email)),r=Object(V.a)(c,2),i=r[0],o=(r[1],Object(n.useState)(e.location.state.exam_code)),l=Object(V.a)(o,2),d=l[0],u=(l[1],Object(n.useState)(e.location.state.exam_link)),j=Object(V.a)(u,2),h=j[0],m=(j[1],Object(n.useState)(parseInt(e.location.state.mins_left))),p=Object(V.a)(m,2),x=p[0],f=p[1],O=Object(n.useState)(parseInt(e.location.state.secs_left)),g=Object(V.a)(O,2),v=g[0],y=g[1],w=Object(n.useState)(0),_=Object(V.a)(w,2),S=_[0],N=_[1],k=Object(n.useState)(0),E=Object(V.a)(k,2),R=E[0],P=E[1],L=Object(n.useState)(0),D=Object(V.a)(L,2),F=(D[0],D[1],Object(n.useState)(!1)),A=Object(V.a)(F,2),M=A[0],U=A[1],I=Object(n.useState)(!1),z=Object(V.a)(I,2),q=z[0],B=z[1],Y=Object(n.useState)(!1),W=Object(V.a)(Y,2),G=W[0],H=W[1],J=Object(n.useState)(!1),Q=Object(V.a)(J,2),X=Q[0],Z=Q[1],$=Object(n.useState)(!1),ee=Object(V.a)($,2),te=ee[0],ne=ee[1],se=Object(b.g)();function ce(){document.hidden&&(N(S+1),ae()("Changed Tab Detected","Action has been Recorded","error"))}function re(e){return e.altKey?(P(R+1),ae()("Alt Key Press Detected","Action has been Recorded","error"),!1):!e.ctrlKey||(P(R+1),ae()("Ctrl Key Press Detected","Action has been Recorded","error"),!1)}return Object(n.useEffect)((function(){return document.addEventListener("visibilitychange",ce,!1),document.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1),document.addEventListener("keydown",re,!1),te||(C.a.get("/api/logs/logByEmail?exam_code="+d+"&student_email="+i).then((function(e){console.log(e),P(parseInt(e.data.key_press_count)),N(parseInt(e.data.tab_change_count)),U(e.data.mobile_found),Z(e.data.multiple_faces_found),B(e.data.prohibited_object_found),H(e.data.face_not_visible)})).catch((function(e){console.log(e)})),ne(!0)),function(){document.removeEventListener("visibilitychange",ce),document.removeEventListener("contextmenu",(function(e){e.preventDefault()}),!1),document.removeEventListener("keydown",(function(e){return re(e)}),!1)}})),Object(n.useEffect)((function(){var e=setInterval((function(){v>0?y(v-1):(f(x-1),y(59)),1===x&&0===v&&ae()("Only 1 Minute Left, Please Submit or attendance wont be marked"),v<=0&&x<=0&&b.a,C.a.post("/api/logs/update",{exam_code:d,student_name:s,student_email:i,key_press_count:R,tab_change_count:S,mobile_found:M,face_not_visible:G,prohibited_object_found:q,multiple_faces_found:X}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}),1e3);return function(){clearInterval(e)}})),Object(T.jsxs)("div",{style:{height:"100%"},className:"my_container",id:"my_container",children:[Object(T.jsx)("div",{className:"detect",children:Object(T.jsx)(Be,{MobilePhone:function(){U(!0)},ProhibitedObject:function(){B(!0)},FaceNotVisible:function(){H(!0)},MultipleFacesVisible:function(){Z(!0)}})}),Object(T.jsx)("br",{}),Object(T.jsxs)("div",{className:"name",children:[Object(T.jsxs)("h6",{align:"left",children:["Name:  ",Object(T.jsxs)("span",{style:{fontSize:"20px"},children:[" ",s]})]}),Object(T.jsxs)("h6",{align:"left",children:["Exam ID:  ",Object(T.jsxs)("span",{style:{fontSize:"20px"},children:[" ",d]})]})]}),Object(T.jsx)("div",{className:"time_rem",children:Object(T.jsxs)("p",{children:["Timer: ",0===x&&1===v?null:Object(T.jsxs)("h1",{align:"center",style:{fontSize:"69px"},children:["  ",x,":",v<10?"0".concat(v):v]})," "]})}),Object(T.jsx)("div",{className:"instructions",children:Object(T.jsxs)("p",{align:"center",style:{fontSize:"18px"},children:["To Save Your Attendance :",Object(T.jsx)("br",{})," Kindly Click ",Object(T.jsx)("strong",{children:"Exit Exam"})," after submitting the exam "]})}),Object(T.jsx)("div",{className:"exit",children:Object(T.jsx)("center",{children:Object(T.jsx)(K.a,{style:{fontSize:"15px"},variant:"contained",color:"primary",size:"medium",onClick:function(){ae()("Thank You for taking the exam. Logs have been shared with your professor"),se.push("/dashboard")},children:"Exit Exam"})})}),Object(T.jsx)("div",{className:"test",children:Object(T.jsx)("iframe",{src:h,id:"form",children:" Loading\u2026 "})})]})}if(localStorage.jwtToken){var Ve=localStorage.jwtToken;E(Ve);var We=Object(N.a)(Ve);S.dispatch(R(We));var Ke=Date.now()/1e3;We.exp<Ke&&(S.dispatch(P()),window.location.href="./login")}var Ge=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(T.jsx)(j.a,{store:S,children:Object(T.jsx)(u.a,{children:Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(L,{}),Object(T.jsx)(b.b,{exact:!0,path:"/",component:D}),Object(T.jsx)(b.b,{exact:!0,path:"/register",component:I}),Object(T.jsx)(b.b,{exact:!0,path:"/login",component:q}),Object(T.jsxs)(b.d,{children:[Object(T.jsx)(Y,{exact:!0,path:"/dashboard",component:ze}),Object(T.jsx)(b.b,{exact:!0,path:"/test",component:Ye})]})]})})})}}]),a}(n.Component);r.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(Ge,{})}),document.getElementById("root"))}},[[554,1,2]]]);
//# sourceMappingURL=main.b85d8a96.chunk.js.map